# Projeto final: PesquiseNews API RESTfull

Este projeto, intitulado ([PesquiseNews](https://pesquisenews.com.br)), oferece uma solu√ß√£o full-stack para busca e gest√£o de not√≠cias em tempo real. Aqui est√° um resumo dos principais pontos abordados:

Para obter informa√ß√µes sobre o frontend do ([PesquiseNews](https://pesquisenews.com.br)), consulte o [README do projeto-pesquisenews-frontend](https://github.com/Evandro-developer/projeto-pesquisenews-frontend).

## Sum√°rio:
1. [Fase 2: Back-End](#fase-2-back-end)
2. [Descri√ß√£o do Projeto](#descri√ß√£o-do-projeto)
3. [Back-End - Arquitetura e Caracter√≠sticas](#back-end---arquitetura-e-caracter√≠sticas)
4. [Middleware e Utilit√°rios](#middleware-e-utilit√°rios)
5. [Funcionalidades](#funcionalidades)
6. [Instala√ß√£o e Execu√ß√£o](#Instala√ß√£o-e-Execu√ß√£o)
7. [Configura√ß√£o do arquivo .env](#Configura√ß√£o-do-arquivo-.env)
8. [Endpoints da API](#Endpoints-da-API)
9. [Tecnologias - Bibliotecas e Frameworks Utilizados](#Tecnologias---Bibliotecas-e-Frameworks-Utilizados)
10. [Fun√ß√£o de Valida√ß√£o de Artigos](#fun√ß√£o-de-valida√ß√£o-de-artigos)
11. [Hospedagem no Google Cloud](#hospedagem-no-google-cloud)
12. [Desenvolvido por](#desenvolvido-por)
13. [Considera√ß√µes Finais](#considera√ß√µes-finais)
14. [Licen√ßa](#licen√ßa)
15. [C√≥digo-Fonte](#c√≥digo-fonte)
16. [Agradecimentos](#agradecimentos)

## Fase 2: Back-End Etapa √∫nica

## Descri√ß√£o do Projeto:
O projeto √© uma etapa final do curso de desenvolvimento web da [Tripleten](https://tripleten.com/pt-bra/), com foco na implementa√ß√£o de um back-end robusto que se integra a um aplicativo de busca de not√≠cias.
Esta etapa introduz um back-end robusto para o aplicativo, proporcionando uma experi√™ncia full-stack integrada. Esse back-end serve como a espinha dorsal do aplicativo, permitindo a busca e gest√£o de not√≠cias em tempo real.
Com a integra√ß√£o √† [News API](https://newsapi.org/), √© poss√≠vel acessar artigos e not√≠cias de fontes confi√°veis e renomadas ao redor do mundo.

## Back-End - Arquitetura e Caracter√≠sticas:
- Tecnologia de Base: O back-end √© constru√≠do sobre o **Node.js**, usando o **Express.js** como framework, permitindo uma constru√ß√£o r√°pida e eficiente de APIs.
- Base de Dados: Integrado ao **MongoDB**, um banco de dados NoSQL, garantindo armazenamento persistente de dados, incluindo perfis de usu√°rios e artigos favoritos.
- Autentica√ß√£o de Usu√°rios: Implementa√ß√£o de tokens JWT (JSON Web Tokens) para autentica√ß√£o e prote√ß√£o de rotas.

## Middleware e Utilit√°rios:
- CORS: Configurado para aceitar solicita√ß√µes apenas de dom√≠nios confi√°veis.
- Helmet: Ajuda na prote√ß√£o do aplicativo contra vulnerabilidades web comuns.
- Celebrate: Utilizado para valida√ß√£o de dados e manuten√ß√£o da integridade dos dados.
- Logger: Registro personalizado de todas as solicita√ß√µes e erros, facilitando a depura√ß√£o e monitoramento.

## Funcionalidades:
- Busca de Not√≠cias: Os usu√°rios podem pesquisar not√≠cias em tempo real de fontes confi√°veis e renomadas usando a API externa [News API](https://newsapi.org/).
- Gest√£o de Artigos: Os usu√°rios autenticados podem salvar, visualizar e excluir artigos de suas listas favoritas.
- Autentica√ß√£o: Processos de registro ("signup") e login ("signin") est√£o implementados, com valida√ß√µes para garantir a seguran√ßa das informa√ß√µes dos usu√°rios.
- Limita√ß√£o de Taxa: Implementada para prevenir abuso da API, assegurando uma utiliza√ß√£o justa e eficiente.
- Tratamento de Erros: Middleware personalizado para tratamento de erros, garantindo que os usu√°rios recebam mensagens de erro claras e √∫teis.

## Instala√ß√£o e Execu√ß√£o:
- Fa√ßa o download ou clone este reposit√≥rio em seu ambiente de desenvolvimento.
- Abra o terminal e navegue at√© a pasta raiz do projeto.
- Execute o comando npm install para instalar as depend√™ncias.
- Configure as vari√°veis de ambiente no arquivo .env (consulte o exemplo .env.example).
- Execute o comando npm start para iniciar o servidor.

## Configura√ß√£o do arquivo .env:
O arquivo `.env` √© usado para configurar vari√°veis de ambiente necess√°rias para o projeto funcionar corretamente. Voc√™ deve criar este arquivo na raiz do projeto e definir os seguintes valores:
- **NODE_ENV**: Define o ambiente de execu√ß√£o do aplicativo (e.g., `development`, `production`).
- **DEV_JWT_SECRET**: Chave secreta usada para assinar tokens JWT em ambiente de desenvolvimento.
- **JWT_SECRET**: Chave secreta usada para assinar tokens JWT em ambiente de produ√ß√£o.
- **PORT**: A porta na qual o servidor ser√° executado (e.g., `3001`).
- **NEWS_API_KEY**: Sua chave de API para acessar servi√ßos de not√≠cias externas, pode ser solicitada gratuitamente em ([News API](https://newsapi.org/)).
- **MONGODB_URI**: A URL de conex√£o com o banco de dados **MongoDB**(e.g., `ex. myDb`).
Para criar o arquivo `.env`, voc√™ pode copiar o conte√∫do do arquivo `.env.example` e preencher os valores apropriados.

## Endpoints da API:

### Buscar artigos de not√≠cias
- **M√©todo**: GET
- **Endpoint**: `/`
- **Descri√ß√£o**: Busca artigos de not√≠cias por meio de nossa API, que, por sua vez, consulta a [News API](https://newsapi.org/).
- **Exemplo de uso**: `http://localhost:3001?q=Praias do Nordeste`

Qualquer usu√°rio (mesmo n√£o autenticado) pode pesquisar por not√≠cias usando uma palavra-chave. A pesquisa retorna os resultados em um formato que se adequa ao schema do artigo. No entanto, esses artigos ainda n√£o s√£o salvos no banco de dados neste momento.

Permite a todos a pesquisa: Isso proporciona um acesso f√°cil a informa√ß√µes e tamb√©m pode incentivar os usu√°rios a se registrarem/logarem para que possam salvar artigos de seu interesse.

### Autentica√ß√£o
- **M√©todo**: POST
- **Endpoint**: /signup
- **Descri√ß√£o**: Registrar um novo usu√°rio no sistema.

- **M√©todo**: POST
- **Endpoint**: /signin
- **Descri√ß√£o**: Autenticar um usu√°rio existente e retornar um token de autentica√ß√£o.

Exigir autentica√ß√£o para salvar artigos: Isto garante que apenas os usu√°rios registrados possam salvar artigos, o que √© √∫til para personalizar a experi√™ncia do usu√°rio, manter uma lista de artigos salvos e talvez at√© mesmo evitar spam ou uso indevido da API.

Apenas usu√°rios autenticados podem criar (ou salvar) um artigo.
A fun√ß√£o primeiro verifica se o usu√°rio j√° salvou um artigo com a mesma URL. Se sim, ele retorna um erro.
Se o artigo ainda n√£o foi salvo pelo usu√°rio, ele √© criado no banco de dados.
Em seguida, o artigo √© associado ao usu√°rio atualizando a lista de savedArticles do usu√°rio no banco de dados.

### Usu√°rios
- **M√©todo**: GET
- **Endpoint**: `/users`
- **Descri√ß√£o**: Obter uma lista de todos os usu√°rios cadastrados no sistema.

- **M√©todo**: GET
- **Endpoint**: `/users/me`
- **Descri√ß√£o**: Obter informa√ß√µes do usu√°rio atualmente autenticado.


### Artigos
- **M√©todo**: GET
- **Endpoint**: `/articles`
- **Descri√ß√£o**: Obter todos os artigos salvos pelo usu√°rio atualmente autenticado.

- **M√©todo**: POST
- **Endpoint**: `/articles`
- **Descri√ß√£o**: Criar ou salvar um novo artigo.

- **M√©todo**: DELETE
- **Endpoint**: `/articles/:articleId`
- **Descri√ß√£o**: Excluir um artigo espec√≠fico, usando o ID do artigo.

## Tecnologias - Bibliotecas e Frameworks Utilizados:

### Autentica√ß√£o:
- üîë **Tokens JWT**: Utiliza√ß√£o de tokens JSON Web Token para autenticar e autorizar usu√°rios de forma segura.
- üîê **bcryptjs**: Biblioteca para criptografia de senhas e verifica√ß√£o de hashes.
- üõÇ **jsonwebtoken**: Implementa√ß√£o de tokens JWT para autentica√ß√£o.

### Banco de Dados:
- üçÉ **MongoDB**: Um banco de dados NoSQL usado para armazenamento de dados.
- üìÑ **mongoose**: Biblioteca ODM (Object Data Modeling) para facilitar a intera√ß√£o com o **MongoDB**.

### Validadores e Middleware:
- ‚úÖ **celebrate**: Middleware para validar entradas de solicita√ß√£o, utilizado para valida√ß√£o de dados.
- üìã **joi**: Biblioteca para valida√ß√£o de dados.
- ‚úîÔ∏è **validator**: Biblioteca para valida√ß√£o de dados.
- üîó **cors**: Middleware para habilitar o controle de acesso a recursos de diferentes origens.

### Seguran√ßa e Monitoramento:
- ‚õëÔ∏è **Helmet**: Ajuda na prote√ß√£o do aplicativo contra vulnerabilidades web comuns.
- **Express-rate-limit**: Middleware para limitar a taxa de solicita√ß√µes √† API.

### Registro e Debugging:
- üìú **Logger**: Registro personalizado de todas as solicita√ß√µes e erros, facilitando a depura√ß√£o e monitoramento.
- üñäÔ∏è **Winston**: Bibliotecas para criar e gerenciar registros de logs no aplicativo.
- üìí **express-winston**: Bibliotecas para criar e gerenciar registros de logs no aplicativo.

### Outros:
- üåç **dotenv**: Biblioteca para carregar vari√°veis de ambiente a partir de um arquivo .env.
- üö´ **eslint**: Ferramenta de linting para garantir a qualidade do c√≥digo JavaScript.
- üìè **eslint-config-airbnb-base**: Configura√ß√£o do ESLint seguindo as regras do Airbnb para c√≥digo JavaScript.
- üõ§Ô∏è **Express**: Um framework **Node.js** para constru√ß√£o de aplicativos web e APIs.
- üü© **Node.js**: Uma plataforma de runtime que permite a execu√ß√£o de c√≥digo JavaScript no servidor.

Da arquitetura do backend e sua integra√ß√£o com servi√ßos de frontend. O projeto refor√ßa a import√¢ncia de criar solu√ß√µes seguras, escal√°veis e eficientes para atender √†s demandas dos usu√°rios.

## Fun√ß√£o de Valida√ß√£o de Artigos:
Uma das principais funcionalidades introduzidas no backend √© a valida√ß√£o de artigos antes de sua inclus√£o ou exibi√ß√£o. Esta fun√ß√£o, denominada **isValidArticle**, garante que os artigos que est√£o sendo processados pelo nosso sistema n√£o cont√™m valores indesejados ou datas inv√°lidas.

### Descri√ß√£o da Funcionalidade:
A fun√ß√£o **isValidArticle** serve para verificar a integridade e relev√¢ncia dos artigos. Ela se concentra em duas verifica√ß√µes principais:

### Verifica√ß√£o de Conte√∫do Indesejado:
A fun√ß√£o verifica se os artigos cont√™m quaisquer conte√∫dos indesejados, como links removidos, valores nulos ou placeholders comuns que podem indicar um artigo comprometido ou incompleto. Esta verifica√ß√£o √© essencial para manter a integridade do conte√∫do exibido aos usu√°rios.

### Verifica√ß√£o de Data:
Outra verifica√ß√£o crucial √© para a data de publica√ß√£o do artigo. Se um artigo possui uma data que coincide com "1970-01-01T00:00:00Z", isso pode indicar uma data inv√°lida ou um placeholder, sendo assim, o artigo √© considerado inv√°lido.

A fun√ß√£o retorna true se o artigo for v√°lido (n√£o cont√©m conte√∫do indesejado ou data inv√°lida) e false caso contr√°rio. Esta valida√ß√£o √© crucial para garantir que o conte√∫do apresentado aos usu√°rios seja de alta qualidade e relev√¢ncia, e que os artigos comprometidos ou irrelevantes n√£o sejam processados inadvertidamente.

**const isValidArticle** = (article) => {
  // Lista de valores indesejados
  const undesiredValues = [null, "[Removed]", "https://removed.com"];

  // Verifica se algum valor indesejado est√° presente em quaisquer propriedades dos artigos
  const hasUndesiredContent = [
    "title",
    "description",
    "source",
    "url",
    "urlToImage",
  ].some((prop) => undesiredValues.includes(article[prop]));

  // Verifica se tem uma data inv√°lida
  const hasInvalidDate = article.publishedAt === "1970-01-01T00:00:00Z";

  return !(hasUndesiredContent || hasInvalidDate);
};

Recomendamos que os desenvolvedores implementem sempre verifica√ß√µes como esta ao lidar com conte√∫do de terceiros ou dados de APIs externas, garantindo assim a seguran√ßa, integridade e a melhor experi√™ncia do usu√°rio.

## Hospedagem no Google Cloud:
Este projeto foi hospedado no **Google Cloud** na Fase 3 do projeto ([PesquiseNews](https://pesquisenews.com.br)) para que voc√™ possa acess√°-lo online. O backend do aplicativo implantado em uma inst√¢ncia do Google Compute Engine, enquanto o frontend no **Google Cloud Storage**. Isso permite experimentar o aplicativo sem precisar configurar nada localmente, aproveitando a infraestrutura e servi√ßos de nuvem escal√°veis. O GCP proporciona uma solu√ß√£o confi√°vel e eficiente para hospedagem de aplica√ß√µes, permitindo a nossa API ter alta disponibilidade e baixa lat√™ncia.

Agradecemos por visitar o aplicativo hospedado no **Google Cloud**!

## Desenvolvido por:

### **Evandro M Oliveira**
**Profiss√£o**: Desenvolvedor Web.
**Especialidade**: Dom√≠nio em **Node.js**, **Express.js**, otimiza√ß√£o de consultas em **MongoDB** e **React**.
**Forma√ß√£o**: Atualmente cursando Ci√™ncia de Dados e um Boot Camp em An√°lise de Dados. Tamb√©m aprofundando conhecimentos em Design de UI/UX.
**Contribui√ß√£o ao projeto**: Desenvolvimento e hospedagem do back-end na **Google Cloud**.

### [**Tripleten**](https://tripleten.com/pt-bra/)
**Contribui√ß√£o ao projeto**: Design e experi√™ncia do usu√°rio.

## Considera√ß√µes Finais:
A implementa√ß√£o do back-end para o ([PesquiseNews](https://pesquisenews.com.br)) n√£o apenas eleva a funcionalidade do aplicativo, mas tamb√©m exemplifica a integra√ß√£o eficiente de diversas tecnologias e bibliotecas para criar uma solu√ß√£o full-stack. Seja voc√™ um entusiasta de not√≠cias ou apenas um usu√°rio curioso, convidamos voc√™ a experimentar este aplicativo e mergulhar no mundo das not√≠cias em tempo real.
Agradecemos a todos que contribu√≠ram para o sucesso deste projeto. A implementa√ß√£o da API RESTfull marcou uma grande etapa em minha jornada de aprendizado, permitindo compreender os intricados detalhes do desenvolvimento back-end. Espero continuar aprimorando minhas habilidades e trazer ainda mais inova√ß√µes no futuro.

## Licen√ßa:
Este projeto √© open source e est√° licenciado sob a Licen√ßa MIT. Isso significa que voc√™ √© livre para usar, copiar, modificar e distribuir o projeto, desde que forne√ßa os devidos cr√©ditos aos autores originais e siga os termos da licen√ßa.

O licenciamento sob a Licen√ßa MIT √© uma maneira de permitir que outros desenvolvedores usem e contribuam para o projeto, enquanto tamb√©m protege os direitos dos autores originais. Se voc√™ decidir usar ou modificar este projeto, lembre-se de incluir a licen√ßa original e dar cr√©dito aos autores.

A Licen√ßa MIT √© uma licen√ßa permissiva, o que significa que ela n√£o coloca muitas restri√ß√µes sobre como voc√™ pode usar ou redistribuir o software. No entanto, ela vem com uma isen√ß√£o de responsabilidade importante, que basicamente diz que o software √© fornecido "como est√°", sem qualquer tipo de garantia.

## C√≥digo-Fonte:
Acesse o [reposit√≥rio do projeto](https://github.com/Evandro-developer/projeto-pesquisenews-backend) no GitHub para consultar o c√≥digo-fonte completo e pode ser encontrado em nosso reposit√≥rio no GitHub. Sinta-se √† vontade para explor√°-lo, fazer fork e contribuir com melhorias ou corre√ß√µes.

Se voc√™ estiver interessado em contribuir ou simplesmente quiser dar uma olhada, fique √† vontade para visitar o reposit√≥rio. Qualquer feedback ou contribui√ß√£o √© muito apreciado.

## Agradecimentos:
Agradecemos por acompanhar o desenvolvimento deste projeto, aos coordenadores, tutores e revisores da [Tripleten](https://tripleten.com/pt-bra/) por me guiarem durante este curso. Tamb√©m gostaria de agradecer a toda a comunidade de desenvolvimento por fornecer recursos e ferramentas valiosos que facilitaram minha jornada de aprendizado.

Um agradecimento especial a todos que contribu√≠ram para este projeto, seja por meio de c√≥digo, design, testes ou simplesmente dando feedback. Cada contribui√ß√£o fez a diferen√ßa e ajudou a moldar este projeto no que ele √© hoje.

Al√©m disso, gostaria de agradecer √† comunidade de desenvolvedores e aos muitos recursos online que tornaram poss√≠vel aprender e implementar as v√°rias tecnologias e bibliotecas usadas neste projeto. A jornada de aprendizado nunca termina, e sou grato por todas as oportunidades de aprendizado que surgiram ao longo do caminho.

Finalmente, obrigado a voc√™, leitor, por se interessar e gastar seu tempo aprendendo sobre o projeto ([PesquiseNews](https://pesquisenews.com.br)). Esperamos que voc√™ ache o projeto √∫til e talvez at√© seja inspirado a criar algo semelhante ou a contribuir para este projeto. Juntos, podemos continuar a expandir e melhorar o mundo do desenvolvimento web.

Obrigado.